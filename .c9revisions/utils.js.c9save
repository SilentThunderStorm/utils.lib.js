{"ts":1381714721724,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1381715250185,"patch":[[{"diffs":[[1,"var utils =\n{\n    // Extremely flexible timer system\n\ttimer:function(duration, callbacks, options)\n\t{\n\t\tif(this instanceof timer)\n\t\t{\n\t\t\tif \n\t\t\t( \n\t\t\t\ttypeof arguments[0] != 'number' && \n\t\t\t\ttypeof arguments[1].onfinish ==='undefined'\n\t\t\t) \n\t\t\t{\n\t\t\t\tthrow (\"Timer requires, at minimum, a duration and an 'onfinish' callback.\");\n\t\t\t}\n\t\t\t\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tthis.duration = arguments[0];\n\t\t\tthis.progress = 0;\n\t\t\tthis.time = 0;\n\t\t\tthis.status = 'ready';\n\t\t\t\n\t\t\t// Callbacks\n\t\t\tvar onstart = arguments[1].onstart||null,\n\t\t\tonprogress = arguments[1].onprogress||null,\n\t\t\tonpause = arguments[1].onpause||null,\n\t\t\tonabort = arguments[1].onabort||null,\n\t\t\tonreset = arguments[1].onreset||null,\n\t\t\tonfinish = arguments[1].onfinish||arguments[1];\n\t\t\t\n\t\t\t// Option Flags\n\t\t\tif(typeof arguments[2] == 'undefined') arguments[2] = '';\n\t\t\tthis.continuous = arguments[2].continuous||false;\n\t\t\t// TODO this.global = arguments[2].global||null;\n\t\t\tthis.ease = arguments[2].ease||null;\n\t\t\t\t\t\n\t\t\tvar current = 0, total = 0;\n\t\t\t\n\t\t\t// Main methods\n\t\t\tthis.start = function()\n\t\t\t{\n\t\t\t\tvar msg = (this.status == 'paused')?'Restarting':'Starting';\n\t\t\t\tthis.status = 'running';\n\t\t\t\tcurrent = new Date().getTime();\n\t\t\t\tthis.run();\n\t\t\t\tif(onstart)onstart(msg);\n\t\t\t\treturn this;\n\t\t\t};\n\t\t\tthis.pause = function()\n\t\t\t{\n\t\t\t\tvar now = new Date().getTime();\n\t\t\t\ttotal += now - current;\n\t\t\t\tcurrent = now;\n\t\t\t\tthis.status = 'paused';\n\t\t\t\tif(onpause)onpause(total);\n\t\t\t\treturn total;\n\t\t\t};\n\t\t\tthis.abort = function()\n\t\t\t{\n\t\t\t\tthis.time = this.progress = 0;\n\t\t\t\ttotal = current = 0;\n\t\t\t\tthis.status = 'aborted';\n\t\t\t\tif(onabort)onabort();\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\tthis.reset = function()\n\t\t\t{\n\t\t\t\tthis.time = this.progress = 0;\n\t\t\t\ttotal = current = 0;\n\t\t\t\tthis.status = 'ready';\n\t\t\t\tif(onreset)onreset();\n\t\t\t\treturn true;\n\t\t\t};\n\t\t\t\n\t\t\t// Main loop\n\t\t\tthis.run = function()\n\t\t\t{\n\t\t\t\tif(this.status != 'running') return false;\n\t\t\t\t\n\t\t\t\tvar now = new Date().getTime();\n\t\t\t\tthis.time = now-current+total;\n\t\t\t\t\n\t\t\t\tthis.progress = this.time / this.duration;\n\t\t\t\t\n\t\t\t\tif(onprogress) onprogress((this.progress>1)?1:this.progress);\n\t\t\t\t\n\t\t\t\tvar ease;\n\t\t\t\tif(this.ease) ease((this.progress>1)?1:this.progress);\n\t\t\t\t\n\t\t\t\tif (this.progress > 1)\n\t\t\t\t{\n\t\t\t\t\tonfinish();\n\t\t\t\t\tthis.reset();\n\t\t\t\t\tif((!!this.continuous) && (this.status != 'aborted'))this.start();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\trequestAnimationFrame(function(){self.run()});\n\t\t\t};\n\t\t}\n\t\telse return new timer(duration, callbacks, options);\n\t}\n};"]],"start1":0,"start2":0,"length1":0,"length2":2473}]],"length":2473,"saved":false}
